import socket
import deliverypj



class Client:
    def __init__(self, client_sms):
        self.target_host = 'localhost'
        self.target_port = 9999
        # self.ClientMessage = bytes(client_sms)
        self.ClientMessage = bytes(client_sms, 'utf-8')


    def runClient(self):
        client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        client.connect((self.target_host, self.target_port))

        client.send(self.ClientMessage)

        recvFromServer = client.recv(4096).decode("utf-8")
        splitData =recvFromServer.split("$")
        listL = []
        for d in splitData:
           d=input(d)
           listL.append(d)
        print(listL)
        mystr = '$'.join(map(str, listL))
        gotoserver = bytes(mystr, 'utf8')
        client.send(gotoserver)


        #print(f'Back received from server:\n{recvFromServer}')
        client.close()



    def main(self):
        Clientsms = deliverypj._option()
        print(type(Clientsms))
        tcpClient = Client(Clientsms)
        tcpClient.runClient()

if __name__ == "__main__":
    while True:

        # Clientsms = input("Enter data to send>:")
        # print(type(Clientsms))
        tcpClient = Client('h')
        tcpClient.main()


